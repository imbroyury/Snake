!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){(function(e){var i;i=function(){function e(e){var t=function(e){if("number"==typeof parseInt(e)){var t=parseInt(e);if(t<360&&t>0)return[t,t]}if("string"==typeof e)if(l[e]){var i=l[e];if(i.hueRange)return i.hueRange}else if(e.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){const t=function(e){e=3===(e=e.replace(/^#/,"")).length?e.replace(/(.)/g,"$1$1"):e;const t=parseInt(e.substr(0,2),16)/255,i=parseInt(e.substr(2,2),16)/255,r=parseInt(e.substr(4,2),16)/255,n=Math.max(t,i,r),s=n-Math.min(t,i,r),a=n?s/n:0;switch(n){case t:return[(i-r)/s%6*60||0,a,n];case i:return[60*((r-t)/s+2)||0,a,n];case r:return[60*((t-i)/s+4)||0,a,n]}}(e)[0];return[t,t]}return[0,360]}(e.hue),i=s(t);return i<0&&(i=360+i),i}function t(e,t){if("monochrome"===t.hue)return 0;if("random"===t.luminosity)return s([0,100]);var i=function(e){return n(e).saturationRange}(e),r=i[0],a=i[1];switch(t.luminosity){case"bright":r=55;break;case"dark":r=a-10;break;case"light":a=55}return s([r,a])}function i(e,t,i){var r=function(e,t){for(var i=n(e).lowerBounds,r=0;r<i.length-1;r++){var s=i[r][0],a=i[r][1],o=i[r+1][0],h=i[r+1][1];if(t>=s&&t<=o){var c=(h-a)/(o-s);return c*t+(a-c*s)}}return 0}(e,t),a=100;switch(i.luminosity){case"dark":a=r+20;break;case"light":r=(a+r)/2;break;case"random":r=0,a=100}return s([r,a])}function r(e,t){switch(t.format){case"hsvArray":return e;case"hslArray":return h(e);case"hsl":var i=h(e);return"hsl("+i[0]+", "+i[1]+"%, "+i[2]+"%)";case"hsla":var r=h(e),n=t.alpha||Math.random();return"hsla("+r[0]+", "+r[1]+"%, "+r[2]+"%, "+n+")";case"rgbArray":return o(e);case"rgb":return"rgb("+o(e).join(", ")+")";case"rgba":var s=o(e),n=t.alpha||Math.random();return"rgba("+s.join(", ")+", "+n+")";default:return function(e){function t(e){var t=e.toString(16);return 1==t.length?"0"+t:t}var i=o(e);return"#"+t(i[0])+t(i[1])+t(i[2])}(e)}}function n(e){for(var t in e>=334&&e<=360&&(e-=360),l){var i=l[t];if(i.hueRange&&e>=i.hueRange[0]&&e<=i.hueRange[1])return l[t]}return"Color not found"}function s(e){if(null===c)return Math.floor(e[0]+Math.random()*(e[1]+1-e[0]));var t=e[1]||1,i=e[0]||0,r=(c=(9301*c+49297)%233280)/233280;return Math.floor(i+r*(t-i))}function a(e,t,i){var r=i[0][0],n=i[i.length-1][0],s=i[i.length-1][1],a=i[0][1];l[e]={hueRange:t,lowerBounds:i,saturationRange:[r,n],brightnessRange:[s,a]}}function o(e){var t=e[0];0===t&&(t=1),360===t&&(t=359),t/=360;var i=e[1]/100,r=e[2]/100,n=Math.floor(6*t),s=6*t-n,a=r*(1-i),o=r*(1-s*i),h=r*(1-(1-s)*i),c=256,l=256,d=256;switch(n){case 0:c=r,l=h,d=a;break;case 1:c=o,l=r,d=a;break;case 2:c=a,l=r,d=h;break;case 3:c=a,l=o,d=r;break;case 4:c=h,l=a,d=r;break;case 5:c=r,l=a,d=o}return[Math.floor(255*c),Math.floor(255*l),Math.floor(255*d)]}function h(e){var t=e[0],i=e[1]/100,r=e[2]/100,n=(2-i)*r;return[t,Math.round(i*r/(n<1?n:2-n)*1e4)/100,n/2*100]}var c=null,l={};a("monochrome",null,[[0,0],[100,0]]),a("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),a("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),a("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),a("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),a("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),a("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),a("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]);var d=function(n){if(void 0!==(n=n||{}).seed&&null!==n.seed&&n.seed===parseInt(n.seed,10))c=n.seed;else if("string"==typeof n.seed)c=function(e){for(var t=0,i=0;i!==e.length&&!(t>=Number.MAX_SAFE_INTEGER);i++)t+=e.charCodeAt(i);return t}(n.seed);else{if(void 0!==n.seed&&null!==n.seed)throw new TypeError("The seed value must be an integer or string");c=null}var s,a,o;if(null!==n.count&&void 0!==n.count){var h=n.count,l=[];for(n.count=null;h>l.length;)c&&n.seed&&(n.seed+=1),l.push(d(n));return n.count=h,l}return s=e(n),a=t(s,n),o=i(s,a,n),r([s,a,o],n)};return d}(),"object"==typeof e&&e&&e.exports&&(t=e.exports=i),t.randomColor=i}).call(this,i(2)(e))},function(e,t,i){"use strict";i.r(t);class r{constructor({gridSize:e,gridLineWidth:t,shadeOfGray:i,canvasDOMEl:r}){this.gray=i,this.gridSize=e,this.gridLineWidth=t,this.canvas=r,this.cw=r.width,this.ch=r.height,this.ctx=r.getContext("2d")}drawGridBackground(){const e=this.ctx;e.fillStyle="rgba(255, 255, 255)",e.fillRect(0,0,this.cw,this.ch),e.lineWidth=this.gridLineWidth,e.strokeStyle=`rgb(${this.gray}, ${this.gray}, ${this.gray})`;for(let t=0;t<=this.cw;t+=this.gridSize)e.beginPath(),e.moveTo(t,0),e.lineTo(t,this.ch),e.stroke();for(let t=0;t<=this.ch;t+=this.gridSize)e.beginPath(),e.moveTo(0,t),e.lineTo(this.cw,t),e.stroke()}drawElements(e,t){e.draw(this.ctx,this.gridLineWidth,this.gridSize),t.draw(this.ctx,this.gridLineWidth,this.gridSize)}}class n{constructor(e,t,i){this.size=i,this.movementDirection={x:1,y:0},this.head=new s(e,t),this.headColor="#000000",this.tail=[],this.tailColor="#000000",this.directionChangeArray=[]}updatePosition(){if(this.head.incrementPosition(this.movementDirection.x*this.size,this.movementDirection.y*this.size),this.tail.length>0)for(let e=this.tail.length-1;e>=0;e--)0===e?this.tail[e].setPosition(this.head.x-this.movementDirection.x*this.size,this.head.y-this.movementDirection.y*this.size):this.tail[e].setPosition(this.tail[e-1].x,this.tail[e-1].y)}scheduleMovementDirectionChange(e){let t=this.movementDirection;this.directionChangeArray.length>0&&(t=this.directionChangeArray[this.directionChangeArray.length-1]),Math.abs(t.x)===Math.abs(e.x)&&Math.abs(t.y)===Math.abs(e.y)||this.directionChangeArray.push(e)}changeDirection(){this.directionChangeArray.length>0&&(this.movementDirection=this.directionChangeArray.shift())}checkOffCanvas(e,t){const i=this.movementDirection.x*this.size,r=this.movementDirection.y*this.size;return this.head.x+i>=e||this.head.x+i<0||this.head.y+r>=t||this.head.y+r<0}checkSelfCollision(){const e=this.movementDirection.x*this.size,t=this.movementDirection.y*this.size;return this.tail.some(i=>i.x===this.head.x+e&&i.y===this.head.y+t)}isFoodEaten(e){return this.head.x===e.x&&this.head.y===e.y}addTailPiece(){this.tail.unshift(new s(this.head.x,this.head.y))}paintTail(e){this.tailColor=e}draw(e,t){this.head.drawSelf(e,t,this.size,this.headColor),this.tail.forEach(i=>i.drawSelf(e,t,this.size,this.tailColor))}getSnakePosition(){return[this.head,...this.tail]}}class s{constructor(e,t){this.x=e,this.y=t}setPosition(e,t){this.x=e,this.y=t}incrementPosition(e,t){this.x+=e,this.y+=t}drawSelf(e,t,i,r){e.fillStyle=r,e.fillRect(this.x+t/2,this.y+t/2,i-t,i-t)}}var a=i(0),o=i.n(a);class h{constructor(e,t,i){this.x=e,this.y=t,this.size=i,this.color=o()({luminosity:"dark"})}draw(e,t){e.fillStyle=this.color,e.fillRect(this.x+t/2,this.y+t/2,this.size-t,this.size-t)}}const c="snake_leaderboard";class l{static retrieveStorageData(){let e=localStorage.getItem(c);return e&&(e=JSON.parse(e)).sort(d),console.log(e),e}static setPlayerScore(e,t){let i=l.retrieveStorageData();i?(i.push({player:e,score:t}),i.sort(d)):i=[{player:e,score:t}],localStorage.setItem(c,JSON.stringify(i))}}function d(e,t){return e.score>t.score?-1:e.score<t.score?1:0}class u{constructor(e,t,i,s,a){this.canvas=new r(e),this.snake=new n(e.gridSize,e.gridSize,e.gridSize),this.food=new h(...this.getRandomFoodPosition(),e.gridSize),this.gameOn=!0,this.rafID=null,this.score=0,this.scoreDOMEl=i,this.gameEndDOMEl=s,this.playerName=t,this.gameEndCallback=a,this.prepareGame(),this.keyDirectionMap=new Map([[38,{x:0,y:-1}],[87,{x:0,y:-1}],[40,{x:0,y:1}],[83,{x:0,y:1}],[37,{x:-1,y:0}],[65,{x:-1,y:0}],[39,{x:1,y:0}],[68,{x:1,y:0}]])}prepareGame(){this.canvas.drawGridBackground(),this.gameEndDOMEl.classList.remove("visible")}startGame(){this.resetGameScore(),this.addKeyDownListener(),requestAnimationFrame(this.gameProcess.bind(this))}endGame(){cancelAnimationFrame(this.rafID),this.removeKeyDownListener(),this.gameEndDOMEl.classList.add("visible"),this.score>0&&l.setPlayerScore(this.playerName,this.score),this.gameEndCallback()}gameProcess(){this.canvas.drawGridBackground(),this.canvas.drawElements(this.snake,this.food),this.gameOn?(this.rafID%5==0&&(this.snake.changeDirection(),this.snake.checkOffCanvas(this.canvas.cw,this.canvas.ch)||this.snake.checkSelfCollision()?this.gameOn=!1:this.snake.updatePosition(),this.snake.isFoodEaten(this.food)&&(this.snake.addTailPiece(),this.snake.paintTail(this.food.color),this.resetFood(),this.updateGameScore())),this.rafID=requestAnimationFrame(this.gameProcess.bind(this))):this.endGame()}getRandomFoodPosition(){let e,t,i=this.canvas.cw/this.canvas.gridSize,r=this.canvas.ch/this.canvas.gridSize,n=this.snake.getSnakePosition();do{e=(Math.random()*i|0)*this.canvas.gridSize,t=(Math.random()*r|0)*this.canvas.gridSize}while(n.filter(i=>i.x===e&&i.y===t).length>0);return[e,t]}resetFood(){this.food=new h(...this.getRandomFoodPosition(),this.canvas.gridSize)}resetGameScore(){this.score=0,this.scoreDOMEl.innerText=0}updateGameScore(){this.score++,this.scoreDOMEl.innerText=this.score}handleEvent(e){if("keydown"===e.type){const t=e.keyCode;this.keyDirectionMap.has(t)&&(e.preventDefault(),this.snake.scheduleMovementDirectionChange(this.keyDirectionMap.get(t)))}}addKeyDownListener(){document.addEventListener("keydown",this)}removeKeyDownListener(){document.removeEventListener("keydown",this)}}const m=document.getElementById("canvas");m.width=500,m.height=500;const g={canvasDOMEl:m,shadeOfGray:150,gridSize:25,gridLineWidth:1},f=document.getElementById("score"),y=document.getElementById("score-name"),v=document.getElementById("game-end-msg"),p=document.querySelector(".player-name-modal"),b=document.forms.nameform,w=b.querySelector(".error-message"),k=document.querySelector(".leaderboard-table").tBodies[0];let x="",S=new u(g,x,f,v,D);function D(){let e=l.retrieveStorageData();if(e){for(;k.rows.length>0;)k.deleteRow(0);e.splice(15),e.forEach((e,t)=>{const i=k.insertRow(),r=i.insertCell(0),n=i.insertCell(1),s=i.insertCell(2);r.innerHTML=t+1,n.innerHTML=e.player,s.innerHTML=e.score})}}D(),b.addEventListener("submit",function e(t){t.preventDefault();const i=t.target.elements.nameinput.value.trim();i?i.length>10?w.innerText="Under 10 chars please":(x=i,p.remove(),y.innerHTML=`Hi, ${i}! Your `,b.removeEventListener("submit",e),document.addEventListener("keydown",e=>{32===e.keyCode&&(e.preventDefault(),(S=new u(g,x,f,v,D)).startGame())})):w.innerText="Name not entered"})},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}]);